---
name: pylint

on: push  # yamllint disable-line rule:truthy

# Down scope as necessary via
# https://docs.github.com/en/actions/security-guides
#  /automatic-token-authentication#
#  modifying-the-permissions-for-the-github_token
permissions:
  checks: write
  contents: write

jobs:
  pylint:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0  # Fetch all history for all branches and tags
      - name: Pylint using Graylint's GitHub action
        uses: akaihola/graylint@main
        with:
          version: "@main"
          options: "--output-format=github"
          src: "./src"
          revision: "origin/master..."
          with: >
            black>=22.3.0
            git+https://github.com/akaihola/darkgraylib.git@main
            defusedxml>=0.7.1
            pygments>=2.15.0
            pylint-per-file-ignores>=1.3.2
            pytest>=6.2.0
            pyupgrade>=3
            regex>=2021.4.4
            requests
            requests-cache>=0.7
            ruamel.yaml>=0.17.21
            setuptools
            toml>=0.10.0
          lint: "pylint>=3.3.0"
